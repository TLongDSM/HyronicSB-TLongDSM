
SummonZOMBIEPack:
  Skills:
  - summon{t=zombiepack;amount=1;radius=0} @self
SummonZOMBIEgrounded:
  Skills:
  - summon{t=zombiegrounded;amount=1;radius=0} @self

#### ZOMBIES ####

zombieSHAMBLER:
  Skills:
  - delay 1
  - DefaultState{mid=zombie;t=WALK;s=shamble} @self
  - setspeed{speed=0.75;type=walking}
  
zombieGAP:
  Cooldown: 2
  Conditions:
  - stance{s=climbing} false
  - onground true
  - targetwithin{d=3} false
  - yDiff{diff=>2} true
  TargetConditions:
  - blocktype{type=air} true
  Skills:
  - state{s=jump} @self
  - delay 5
  - lunge{velocity=.75;velocityY=.35} @Forward


#### COMBAT ####

zombieATTACKdamage:
  Conditions:
  - targetwithin{d=2} true
  Skills:
  - damage{a=<caster.level>}

zombieATTACK1sync:
  Skills:
  - CancelEvent
  - skill{s=zombieATTACK1} @self
  
zombieATTACK1:
  Conditions:
  - stance{s=climbing} false
  - offgcd
  Cooldown: 3
  Skills:
  - gcd{ticks=20}
  - state{s=attack} @self
  - delay 20
  - skill{s=zombieATTACKdamage} @target
  
zombieATTACK2sync:
  Skills:
  - CancelEvent
  - skill{s=zombieATTACK2} @self
  
zombieATTACK2:
  Conditions:
  - stance{s=climbing} false
  - offgcd
  Cooldown: 3
  Skills:
  - gcd{ticks=20}
  - state{s=attack2} @self
  - delay 20
  - skill{s=zombieATTACKdamage} @target
  
zombiegroundATTACKsync:
  Skills:
  - CancelEvent
  - skill{s=zombiegroundATTACK} @self
  
#### GROUNDED ####
  
zombieFALLING:
  Conditions:
  - onground false
  - altitude{a=4} true
  Skills:
  - setstance{s=fall} @self
  
zombieGROUNDED_skill:
  Conditions:
  - stance{s=fall} true
  - onground true
  Skills:
  - summon{t=zombiegrounded} @self
  - model{mid=zombie;r=true} @self
  

zombiegroundATTACK:
  Conditions:
  - offgcd
  Cooldown: 3
  Skills:
  - gcd{ticks=20}
  - state{s=attack} @self
  - delay 15
  - totem{md=2;c=1;oH=zombieATTACKdamage;hnp=false;hp=true;hR=1;vR=1;i=1} @Forward{f=1}

### GLOBAL ###

BV_burning:
  Conditions:
  - isburning true
  Skills:
  - effect:particle{p=flame;a=2;hs=.25;vs=.5;y=1;size=2;d=true;dir=0,1,0;s=.1} @self
  - effect:particle{p=large_smoke;a=1;hs=.25;vs=.5;y=1;size=2;d=true;dir=0,1,0;s=.1} @self

BV_RANDOMFLINCH:
  Conditions:
  - variableEquals{var=caster.prime;value="true"} false
  Skills:
  - randomskill{skills=BV_RANDOMFLINCH1,BV_RANDOMFLINCH2,BV_RANDOMFLINCH3} @self
  
BV_RANDOMFLINCH1:
  Skills:
  - state{s=hurt1;p=2} @self
  
BV_RANDOMFLINCH2:
  Skills:
  - state{s=hurt2;p=2} @self
  
BV_RANDOMFLINCH3:
  Skills:
  - state{s=hurt3;p=2} @self


BV_INAIR:
  Cooldown: 1
  Conditions:
  - altitude{a=>2} true
  - stance{s=inair} false
  Skills:
  - setstance{stance=inair} @self
  - state{s=in_air;p=2} @self
  
BV_LAND:
  Cooldown: 1
  Conditions:
  - stance{s=inair} true
  - onground true
  Skills:
  - state{s=in_air;p=2;r=true} @self
  - setstance{stance=default} @self

BV_GREENBLOOD:
  Conditions:
  - damagecause{cause=ENTITY_ATTACK} true
  Skills:
  - effect:particles{particle=block;m=kelp;amount=20;hS=.1;vS=.1} @forward{f=1.25;y=1.6}

BV_REDBLOOD:
  Conditions:
  - damagecause{cause=ENTITY_ATTACK} true
  Skills:
  - effect:particles{particle=block;m=nether_wart;amount=20;hS=.1;vS=.1} @forward{f=1.25;y=1.6}


## SKELETON ##

BV_SKELETON_RUN:
  Skills:
  - defaultstate{type=walk;state=run} @self
  - setspeed{type=walking;s=1.5} @self

BV_SKELETON_WALK:
  Skills:
  - defaultstate{type=walk;state=walk} @self
  - setspeed{type=walking;s=0.75} @self
  
BV_SKELETON_SHOOT:
  Cooldown: 1
  Conditions:
  - incombat true
  - offgcd true
  - targetwithin{d=2} false
  Skills:
  - gcd{ticks=40}
  #- setspeed{type=walking;s=0} @self
  #- stun{d=20} @self
  - state{s=aim} @self
  - delay 10
  - state{s=draw} @self
  - delay 5
  - partvis{pid=skeleton_bow_pulled;v=true} @self
  - partvis{pid=bow_pulled;v=true} @self
  - partvis{pid=skeleton_lrd_skeleton_bow;v=false} @self
  - partvis{pid=lrd_skeleton_bow;v=false} @self
  - delay 15
  - partvis{pid=skeleton_bow_pulled;v=false} @self
  - partvis{pid=bow_pulled;v=false} @self
  - partvis{pid=skeleton_lrd_skeleton_bow;v=true} @self
  - partvis{pid=lrd_skeleton_bow;v=true} @self
  - shoot{type=ARROW;velocity=.5;damage=1} @targetlocation{y=1.25}
  - state{s=shoot;lo=6} @self
  - delay 5
  #- setspeed{type=walking;s=1.5} @self
  
BV_SKELETON_SHOVE:
  Cooldown: 2
  Conditions:
  - targetwithin{d=2} true
  - offgcd true
  Skills:
  - gcd{ticks=20}
  - setspeed{type=walking;s=0} @self
  - state{s=shove;lo=6} @self
  - delay 8
  #- damage{a=1} @target
  - throw{v=6;vy=2} @target
  - delay 5
  - setspeed{type=walking;s=1.5} @self
  
BV_SKELETON_DEATH:
  Skills:
  - effect:particle{p=poof;a=50;hs=.5;vs=1} @self
  - effect:itemspray{item=bone;amount=10;velocity=1;d=20} @self



## CREEPER ##
  
BV_CREEPER_LOOKCHECK_SUDO:
  Skills:
  - skill{s=BV_CREEPER_LOOKCHECK_PASS} @eir{r=12}
  
  
BV_CREEPER_LOOKCHECK_PASS:
  Cooldown: 1
  TargetConditions:
  - fieldofview{angle=90} orElseCast BV_CREEPER_LOOKCHECK_FAIL
  Skills:
  - signal{s=VIEW}

BV_CREEPER_LOOKCHECK_FAIL:
  Skills:
  - signal{s=UNVIEW}

BV_CREEPER_DISGUISE:
  Cooldown: 1
  Conditions:
  - onground true
  - variableEquals{var=caster.prime;value="true"} false
  - stance{s=disguised} false
  Skills:
  - setstance{stance=disguised} @self
  - setspeed{type=walk;speed=0} @self
  - lockmodel{l=true} @self
  - state{s=disguise} @self
  - defaultstate{type=idle;state=disguise_idle} @self
  - skill{s=BV_CREEPER_DISGUISE_GRASS} @BlocksInRadius{r=8}
  - skill{s=BV_CREEPER_DISGUISE_CACTUS} @BlocksInRadius{r=8}
  - skill{s=BV_CREEPER_DISGUISE_STONE} @BlocksInRadius{r=8}
  - skill{s=BV_CREEPER_DISGUISE_DRIPSTONE} @BlocksInRadius{r=8}
  
BV_CREEPER_DISGUISE_GRASS:
  TargetConditions:
  - blocktype{type=DRIPSTONE_BLOCK,POINTED_DRIPSTONE} false
  Conditions:
  - onblock{m=DIRT,GRASS_BLOCK} true
  Skills:
  - setvariable{var=caster.disguise;type=STRING;value="DIRT"} 
  - remapmodel{m=bv_creeper;n=bv_creeper_grass} @self
  
BV_CREEPER_DISGUISE_CACTUS:
  TargetConditions:
  - blocktype{type=DRIPSTONE_BLOCK,POINTED_DRIPSTONE} false
  Conditions:
  - onblock{m=SAND} true
  Skills:
  - setvariable{var=caster.disguise;type=STRING;value="CACTUS"} 
  - remapmodel{m=bv_creeper;n=bv_creeper_cactus} @self
  
BV_CREEPER_DISGUISE_STONE:
  TargetConditions:
  - blocktype{type=DRIPSTONE_BLOCK,POINTED_DRIPSTONE} false
  Conditions:
  - onblock{m=STONE} true
  Skills:
  - setvariable{var=caster.disguise;type=STRING;value="STONE"} 
  - remapmodel{m=bv_creeper;n=bv_creeper_stone} @self
  
BV_CREEPER_DISGUISE_DRIPSTONE:
  TargetConditions:
  - blocktype{type=DRIPSTONE_BLOCK,POINTED_DRIPSTONE} true
  Skills:
  - setvariable{var=caster.disguise;type=STRING;value="DRIPSTONE"} 
  - remapmodel{m=bv_creeper;n=bv_creeper_dripstone} @self

BV_CREEPER_UNDISGUISE:
  Cooldown: 1
  Conditions:
  - stance{s=disguised} true
  Skills:
  - setstance{stance=default} @self
  - remapmodel{m=bv_creeper;n=bv_creeper} @self
  - setspeed{type=walk;speed=1} @self
  - lockmodel{l=false} @self
  - defaultstate{type=idle;state=idle} @self
  - skill{s=BV_CREEPER_UNDISGUISE_PARTICLE_DIRT} @self
  - skill{s=BV_CREEPER_UNDISGUISE_PARTICLE_CACTUS} @self
  - skill{s=BV_CREEPER_UNDISGUISE_PARTICLE_STONE} @self
  - skill{s=BV_CREEPER_UNDISGUISE_PARTICLE_DRIPSTONE} @self

BV_CREEPER_UNDISGUISE_PARTICLE_DIRT:
  Conditions:
  - variableEquals{var=caster.disguise;value="DIRT"} true
  Skills:
  - effect:particle{p=block;m=DIRT;a=50;hs=.15;vs=.45;y=1} @self

BV_CREEPER_UNDISGUISE_PARTICLE_CACTUS:
  Conditions:
  - variableEquals{var=caster.disguise;value="CACTUS"} true
  Skills:
  - effect:particle{p=block;m=CACTUS;a=50;hs=.15;vs=.45;y=1} @self

BV_CREEPER_UNDISGUISE_PARTICLE_STONE:
  Conditions:
  - variableEquals{var=caster.disguise;value="STONE"} true
  Skills:
  - effect:particle{p=block;m=STONE;a=50;hs=.15;vs=.45;y=1} @self

BV_CREEPER_UNDISGUISE_PARTICLE_DRIPSTONE:
  Conditions:
  - variableEquals{var=caster.disguise;value="DRIPSTONE"} true
  Skills:
  - effect:particle{p=block;m=DRIPSTONE;a=50;hs=.15;vs=.45;y=1} @self

BV_CREEPER_PRIME:
  Cooldown: 20
  Conditions:
  - playerwithin{d=3} true
  Skills:
  - skill{s=BV_CREEPER_UNDISGUISE} @self
  - setvariable{var=caster.prime;type=STRING;value="true"} 
  - setAI{ai=false} @self
  - state{s=detonate;p=2} @self
  - delay 10
  - sound{s=entity.creeper.primed} @self
  - delay 50
  - potion{type=DAMAGE_RESISTANCE;duration=20;level=4} @self
  - explosion{yield=4;bd=true} @self
  - remove @self
  
BV_CREEPER_DEATH:
  Skills:
  - delay 30
  - effect:particle{p=poof;a=50;hs=.5;vs=1} @modelpart{mid=bv_creeper;pid=body_2}
  
  
##### SPIDER #####

BV_SPIDERAGGRO:
  Cooldown: 1
  Conditions:
  - onground true
  - targetwithin{d=4} true
  Skills:
  - state{s=attack;p=2;li=4;lo=4} @self


BV_SPIDERBLOCKCHECKER:
  Skills:
  - skill{s=BV_SPIDERBLOCKCHECK_BOTTOM} @self
  - skill{s=BV_SPIDERBLOCKCHECK_FRONT} @BIR{r=1;f=1.25;y=.75;lockpitch=true}
  - skill{s=BV_SPIDERBLOCKCHECK_TOP} @forward{f=0;y=1.5;lockpitch=true}
  - skill{s=BV_SPIDERBLOCKCHECK_LEFT} @forward{f=0;y=.5;so=-1;lockpitch=true}
  - skill{s=BV_SPIDERBLOCKCHECK_RIGHT} @forward{f=0;y=.5;so=1;lockpitch=true}
  - skill{s=BV_SPIDERBLOCKCHECK_BACK} @forward{f=-1;y=.5;lockpitch=true}

BV_SPIDERBLOCKCHECK_FRONT:
  Conditions:
  - inblock{b=WATER} false
  - onground false
  - altitude{a=>2} true
  TargetConditions:
  - blocktype{m=air} false
  Skills:
  - setvariable{var=caster.blockfacing;type=STRING;value="front"} 
  - state{s=front_block;p=2;li=5} @self
  
BV_SPIDERBLOCKCHECK_TOP:
  Conditions:
  - inblock{b=WATER} false
  - onground false
  - altitude{a=>1.5} true
  TargetConditions:
  - blocktype{m=air} false
  Skills:
  - setvariable{var=caster.blockfacing;type=STRING;value="top"} 
  - state{s=top_block;p=2;li=5} @self
  
BV_SPIDERBLOCKCHECK_BOTTOM:
  Conditions:
  - onground true
  Skills:
  - setvariable{var=caster.blockfacing;type=STRING;value="bottom"} 
  - state{s=bottom_block;p=2;li=5} @self
  
BV_SPIDERBLOCKCHECK_LEFT:
  Conditions:
  - inblock{b=WATER} false
  - onground false
  - altitude{a=>1.5} true
  TargetConditions:
  - blocktype{m=air} false
  Skills:
  - setvariable{var=caster.blockfacing;type=STRING;value="left"} 
  - state{s=left_block;p=2;li=5} @self
  
BV_SPIDERBLOCKCHECK_RIGHT:
  Conditions:
  - inblock{b=WATER} false
  - onground false
  - altitude{a=>1.5} true
  TargetConditions:
  - blocktype{m=air} false
  Skills:
  - setvariable{var=caster.blockfacing;type=STRING;value="right"} 
  - state{s=right_block;p=2;li=5} @self
  
BV_SPIDERBLOCKCHECK_BACK:
  Conditions:
  - inblock{b=WATER} false
  - onground false
  - altitude{a=>1.5} true
  TargetConditions:
  - blocktype{m=air} false
  Skills:
  - setvariable{var=caster.blockfacing;type=STRING;value="back"} 
  - state{s=back_block;p=2;li=5} @self
  
BV_SPIDER_DEATH:
  Skills:
  - delay 40
  - effect:particle{p=poof;a=50;hs=.5;vs=1} @modelpart{mid=bv_spider;pid=body}
  
### SPIDERJOCKEY ###


BV_SPIDERJOCKEY_DEATH:
  Skills:
  - partvis{pid=skeleton;em=false;v=false} @self
  - summon{t=bv_skeleton} @selflocation{y=1}
  - delay 40
  - effect:particle{p=poof;a=50;hs=.5;vs=1} @modelpart{mid=bv_spider;pid=body}

bv_SummonSpider:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider1:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider2:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider3:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider4:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider5:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider6:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider7:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider8:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider9:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpider10:
  Skills:
  - summon{t=bv_spider;amount=1;radius=0} @self
bv_SummonSpiderJockey:
  Skills:
  - summon{t=bv_spiderjockey;amount=1;radius=0} @self




#################################################################################################################################

Changetarget_slime:  
  Cooldown: 0
  Skills:
  - runaitargetselector{target=clear}
  - runaitargetselector{target=players}

bv_Slime_Hit:
  Cooldown: 1
  Skills:
  - state{s=hit} @self
  - effect:sound{s=entity.slime.hurt;volume=0.6;pitch=1.1} @self
  
bv_Slime_Attack:
  Conditions:
  - offgcd
  - targetwithin{d=4} true
  - hasaurastacks{auraName=JUMPED} false
  Skills:
  - gcd{ticks=20}
  - state{s=attack;li=2;lo=4} @self
  - potion{type=SLOW;duration=20;level=50;hasParticles=false} @self
  - lunge{velocity=0.5;velocityY=0.7} @forward{f=3;y=4}
  - effect:sound{s=entity.slime.attack;volume=0.6;pitch=1} @self
  - delay 14
  - effect:sound{s=entity.player.attack.sweep;volume=0.6;pitch=0.6} @self
  - totem{md=2;c=1;oH=bv_Slime_Attack_DAMAGE;hnp=false;hp=true;hR=1.5;vR=1.5;i=1} @forward{f=0.5}
  
bv_Slime_Attack_DAMAGE:
  TargetConditions:
  - isblocking false
  Skills:
  - damage{a=5;pkb=false;hnp=false;hp=true}
  - throw{velocity=5;velocityY=1}


